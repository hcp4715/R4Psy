"0","# 原因debug"
"0","# 查看R的默认对比设置"
"0","options(""contrasts"")"
"1","$contrasts
"
"1","        unordered "
"1","          ordered "
"1","
"
"1","""contr.treatment"" "
"1","     ""contr.poly"" "
"1","
"
"1","
"
"0","# 从输出结果可知，无序默认为contr.treatment()，有序默认为contr.poly()"
"0","# factor()函数来创建无序因子，ordered()函数创建有序因子"
"0",""
"0","is.factor(df$climate)"
"1","[1]"
"1"," TRUE"
"1","
"
"0","is.ordered(df$climate)"
"1","[1]"
"1"," FALSE"
"1","
"
"0","# climate是无序因子"
"0",""
"0","# 创建一个3水平的因子的基准对比"
"0","c1 <- contr.treatment(3)"
"0",""
"0","# 创建一个新的对比，这个编码假设分类水平之间的差异被等分，每一个水平与总均值的差异等于1/3"
"0","my.coding <- matrix(rep(1/3, 6), ncol=2)"
"0","# 将对比调整为每个水平与第一个水平的振幅减去1/3"
"0","# 可能的原因：除了关心每个水平对应的效果，同时也关心水平与水平之间的效果"
"0","my.simple <- c1-my.coding"
"0","my.simple"
"1"," "
"1","          2"
"1","          3"
"1","
1"
"1"," -0.3333333"
"1"," -0.3333333"
"1","
2"
"1","  0.6666667"
"1"," -0.3333333"
"1","
3"
"1"," -0.3333333"
"1","  0.6666667"
"1","
"
"0","# 更改climate的对比"
"0","contrasts(df$climate) <- my.simple"
"0",""
"0","# 将数据集df的romantic列的对比设为等距对比，它假设分类水平之间的差异为等距离"
"0","contrasts(df$romantic) <- contr.sum(2)/2"
"0",""
"0","# 方差分析"
"0","aov1 <- car::Anova(lm(Temperature ~ climate * romantic, data = df),"
"0","                   type = 3)"
"0","aov1"
"1","Anova Table (Type III tests)
"
"1","
"
"1","Response: Temperature"
"1","
"
"1","                "
"1","  Sum Sq"
"1","   Df"
"1","      F value"
"1","                Pr(>F)"
"1","    "
"1","
(Intercept)     "
"1"," 1768309"
"1","    1"
"1"," 9284069.6498"
"1"," < 0.00000000000000022"
"1"," ***"
"1","
climate         "
"1","      19"
"1","    2"
"1","      50.8832"
"1"," < 0.00000000000000022"
"1"," ***"
"1","
romantic        "
"1","       0"
"1","    1"
"1","       1.0006"
"1","              0.317336"
"1","    "
"1","
climate:romantic"
"1","       2"
"1","    2"
"1","       5.0136"
"1","              0.006765"
"1"," ** "
"1","
Residuals       "
"1","     271"
"1"," 1421"
"1","             "
"1","                      "
"1","    "
"1","
"
"1","---
Signif. codes:  "
"1",""
"1","0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1"
"1","
"
